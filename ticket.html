<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>طباعة تذاكر العملاء</title>
    <link rel="stylesheet" href="style.css"> 
    <style>
        /* تخطيط الطباعة لتذاكر 5سم * 5سم على A4 */
        @media print {
            @page {
                size: A4 portrait;
                margin: 0;
            }
            body { 
                margin: 0; 
                padding: 0; 
                -webkit-print-color-adjust: exact !important; 
                print-color-adjust: exact !important;
            }
            .no-print { display: none; }
            .ticket-grid {
                display: grid;
                /* A4 (210mm x 297mm). 5cm ticket, 4 tickets width (20cm) */
                grid-template-columns: repeat(4, 50mm); 
                grid-auto-rows: 50mm;
                margin: 5mm; /* هامش بسيط */
            }
            .ticket {
                width: 50mm;
                height: 50mm;
                border: 1px dashed #333;
                box-sizing: border-box;
                padding: 5mm;
                background-color: #fff;
            }
        }
        /* تصميم التذكرة على الشاشة */
        .ticket {
            border: 1px dashed #ccc;
            background-color: #fff;
            height: 150px; /* لسهولة العرض على الشاشة */
            width: 150px;
        }
    </style>
</head>
<body class="bg-gray-100 p-6">

    <div class="max-w-4xl mx-auto no-print bg-white p-6 rounded-xl shadow-2xl mb-6">
        <h2 class="text-3xl font-bold text-center text-blue-800 mb-6">طباعة تذاكر العملاء</h2>
        
        <div class="mb-4">
            <label for="print-clinic-select" class="block text-gray-700 font-semibold mb-2">اختر العيادة:</label>
            <select id="print-clinic-select" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-lg">
                </select>
        </div>

        <div class="grid grid-cols-3 gap-4 mb-6">
            <label class="block">
                <span class="text-gray-700">الرقم الحالي:</span>
                <input type="number" id="current-queue-number" class="w-full p-3 border rounded-lg bg-gray-50" readonly>
            </label>
            <label class="block">
                <span class="text-gray-700">طباعة من رقم:</span>
                <input type="number" id="start-ticket" value="1" class="w-full p-3 border rounded-lg">
            </label>
            <label class="block">
                <span class="text-gray-700">طباعة حتى رقم:</span>
                <input type="number" id="end-ticket" value="20" class="w-full p-3 border rounded-lg">
            </label>
        </div>
        
        <button id="print-tickets-btn" class="w-full bg-blue-600 text-white p-3 rounded-lg font-bold text-xl hover:bg-blue-700 transition">توليد وطباعة التذاكر</button>
    </div>

    <div id="print-area" class="ticket-grid max-w-4xl mx-auto p-4 bg-white shadow-xl">
        </div>

    <script type="module" src="js/firebaseConfig.js"></script>
    <script type="module" src="js/ticket.js"></script>
</body>
</html>
